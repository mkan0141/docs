---
layout: ~/layouts/TutorialLayout.astro
title: Build your first Astro island - Use a Preact component to greet your visitors
setup: |
  import Checklist from '~/components/Checklist.astro';
  import Goals from '~/components/tutorial/Goals.astro';
  import MultipleChoice from '~/components/tutorial/MultipleChoice.astro';
  import Option from '~/components/tutorial/Option.astro';
  import PreCheck from '~/components/tutorial/PreCheck.astro';
---

<Goals>
  - used the `astro add` command to add an official integration (Preact) to your site
  - created two UI Framework components (using Preact) and rendered them on an Astro page
  - used different `client:directives` to customize the JavaScript hydration of your framework components
</Goals>

Astro components are **templating components only**, so they require `<script>` tags to execute JavaScript in the browser. 

But, Astro can also render components from other popular UI frameworks, including React, Preact, Svelte, Vue, Solid, Lit and AlpineJS. For each individual UI framework component, Astro can individually and selectively execute **its own** JavaScript in an isolated island, with a `client:directive` component attribute.

## Add a UI Framework Component

1. Quit the dev server (<kbd>CTRL</kbd> + <kbd>C</kbd>) to have access to the terminal. Then, type the following command to add the ability to use Preact components in your Astro project:

    ```shell
    npx astro add preact
    ```

2. Follow the command line instructions to confirm adding Preact to your project.

3. Create a new file in `src/components/` named `Greeting.jsx`

    Note the `.jsx` file extension used by Preact. This file will be written in JSX, not Astro syntax. 
    
    :::tip
    You can even add existing `.jsx` files from other projects directly in to your Astro project! (Though, some libraries and external packages may not be supported).
    :::

## Preact Greeting Banner

This component will randomly select a greeting and use it in a welcome message.

1. Add the following code to `Greeting.jsx`:

    ```jsx title="src/components/Greeting.jsx"
    import { h } from 'preact'

    export default function Banner({messages}) {
      const greeting = messages[(Math.floor(Math.random() * 4))];
      return (
        <h3>{greeting}! Thank you for visiting!</h3>
      );
    }
    ```

2. Import and use this component in your component template on your Home page `index.astro`. Note that `jsx` files are imported without their file extension:

    ```astro title="src/pages/index.astro" ins={3,7}
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting';
    const pageTitle="Home Page"
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>My awesome blog subtitle</h2>
      <Greeting messages={["Hi", "Hello", "Howdy", "Hey there"]} />
    </BaseLayout>
    ```

3. Add a second `<Greeting />` component with the `client:load` directive.

      ```astro title="src/pages/index.astro" ins={8} "client:load"
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting';
    const pageTitle="Home Page"
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>My awesome blog subtitle</h2>
      <Greeting messages={["Hi", "Hello", "Howdy", "Hey there"]} />
      <Greeting client:load messages={["Bonjour", "Hej", "Hallo", "Hola"]} />
    </BaseLayout>
    ```

4. To see the difference in behavior, you will need to view your built site. Commit your current progress to GitHub, and wait for Netlify to automatically build and republish your site to the web. 

    Or, to view your built site locally, quit the dev server and run the following two commands to first build your site to a local folder and then run the preview of that build.

    ```sh
    npm run build

    npm run preview
    ```

5. Refresh the page several times and compare the two greeting messages. Don't forget to restart the dev server before continuing if you are previewing your build locally.


### Analyze the Pattern

Consider an Astro component with the following code:

```astro
---
import BaseLayout from '../layouts/BaseLayout.astro';
import AstroBanner from '../components/AstroBanner.astro';
import PreactBanner from '../components/PreactBanner';
import SvelteCounter from '../components/SvelteCounter.svelte';
---
<BaseLayout>
  <AstroBanner />
  <PreactBanner />
  <PreactBanner client:load />
  <SvelteCounter />
  <SvelteCounter client:visible />
</BaseLayout>
```

1. Which of the five components will be **hydrated**, sending JavaScript to the client to run even after the site has been built?

    || `<PreactBanner client:load />` and `<SvelteCounter client:visible />` will be hydrated. ||

2. In what way(s) will the two `<PreactBanner />` components be the same? In what way(s) will they be different? 

    || Same: They both render the same HTML elements and look the same. Different: One will be generated at build time and will not rerender until your site is rebuilt. It will look the same until your site is rebuilt. The one with a client directive will execute its JavaScript on every page refresh, showing an updated component. ||

3. If you couldn't see your website's code, only the live published page, how would you tell which `<SvelteCounter />` component used `client:visible`? 

    || Try clicking the buttons, and see which one is interactive. The one that is interactive has a client directive, because its JavaScript to increase and decrease the counter in response to button clicks has been sent to the client. ||


## Preact Quote Generator

This component is interactive, written in Preact using popular hooks like `useState()` and `useEffect()`. It fetches a random quotation from an external API on page refresh, and also in response to a button click.

1. Copy the code below and paste it into a new file named `Quote.jsx` in `src/components`:

    ```jsx title="src/components/Quote.jsx"
    import { h } from 'preact';
    import { useState, useEffect } from 'preact/hooks';

    export default function Quotable() {
      const [data, setData] = useState(null);

      async function updateQuote() {
        const response = await fetch("https://api.quotable.io/random");
        const data = await response.json();
        setData(data);
      }

      useEffect(() => {
        updateQuote();
      }, []);

      if (!data) return null;

      return (
        <div>
          <figure>
            <blockquote>{data.content}</blockquote>
            <figcaption>â€” {data.author}</figcaption>
          </figure>
          <button onClick={updateQuote}>New Quote</button>
        </div>
      );
    }
    ```

2. Import and add this component to your Home page at `index.astro`.

    ```astro title="src/pages/index.astro" ins={4,10}
    ---
    import BaseLayout from '../layouts/BaseLayout.astro';
    import Greeting from '../components/Greeting.jsx';
    import Quote from '../components/Quote.jsx';
    const pageTitle="Home Page"
    ---
    <BaseLayout pageTitle={pageTitle}>
      <h2>My awesome blog subtitle</h2>
      <Greeting messages={["Hi", "Hello", "Howdy", "Hola"]} />
      <Greeting client: load messages={["Hi", "Hello", "Howdy", "Hola"]} />
      <Quote client:only="preact" />
    </BaseLayout>
    ```

3. Check your browser preview at `localhost:3000` and verify that your component automatically fetches a random quotation on page load, and in response to clicking the <kbd>New Quote</kbd> button.

4. Preview your built site, following the instructions in the previous example. You can ommitt your changes to GitHub and wait for Netlify to automatically build and republish your site to the web, or you can stop the dev server, build, then preview your build locally.

5. Refresh the page several times and click the <kbd>New Quote</kbd> button and verify that both events fetch a new random quotation from the API.

## Before you go

### Test your knowledge

Choose whether each of the following statements describes Astro `<script>` tags, UI framework components or both.

1. They allow you to include interactive UI elements on your website.

    <MultipleChoice>
      <Option>
        Astro `<script>` tags
      </Option>
      <Option>
        UI framework components
      </Option>
      <Option isCorrect>
        both
      </Option>
    </MultipleChoice>

2. They will create static elements on your site unless you include a `client:directive` to send their JavaScript to the client and run in the browser.

    <MultipleChoice>
      <Option>
        Astro `<script>` tags
      </Option>
      <Option isCorrect>
        UI framework components
      </Option>
      <Option>
        both
      </Option>
    </MultipleChoice>

2. They allow you to "try out" a new framework without requiring you to start an entire new project using that tech stack.

    <MultipleChoice>
      <Option>
        Astro `<script>` tags
      </Option>
      <Option isCorrect>
        UI framework components
      </Option>
      <Option>
        both
      </Option>
    </MultipleChoice>

3. They can be reused on multiple pages by adding them to several Astro components, and/or in an Astro layout component.

    <MultipleChoice>
      <Option>
        Astro `<script>` tags
      </Option>
      <Option>
        UI framework components
      </Option>
      <Option isCorrect>
        both
      </Option>
    </MultipleChoice>

4. They allow you to reuse code you have written in other frameworks and you can often just drop them right into your site.

    <MultipleChoice>
      <Option>
        Astro `<script>` tags
      </Option>
      <Option isCorrect>
        UI framework components
      </Option>
      <Option>
        both
      </Option>
    </MultipleChoice>

5. They allow you to create a fully-functional, interactive and dynamic website without needing to know or learn any other JavaScript frameworks.

    <MultipleChoice>
      <Option isCorrect>
        Astro `<script>` tags
      </Option>
      <Option>
        UI framework components
      </Option>
      <Option>
        both
      </Option>
    </MultipleChoice>

### Checklist for moving on

<Checklist key="framework">
- [ ] I can install an Astro integration using the command `astro add` in the terminal.
- [ ] I can write UI framework components in their own language, with their own native extention, then import and use them in `.astro` components alongside my Astro components.
- [ ] I can choose whether to use a `client:directive` to control hydration on my UI framework component, depending on when I want its JavaScript to run.
</Checklist>

### Resources

- [Astro Integrations Guide](/en/guides/integrations-guide/)

- [Using UI Framework Components in Astro](/en/core-concepts/framework-components/#using-framework-components)

- [Astro client directives reference](/en/reference/directives-reference/#client-directives)
